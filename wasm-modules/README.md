# WASM Modules

This directory contains all WebAssembly modules for the Athena malware analysis application.

## Directory Structure

```
wasm-modules/
├── core/               # Core WASM modules
│   ├── analysis-engine/    # Deobfuscation, pattern matching, vulnerability scanning
│   ├── file-processor/     # File parsing, validation, content extraction
│   └── security/          # Sandboxing, crypto operations, signature verification
├── shared/             # Shared utilities and types
└── bridge/             # Platform-specific bridges (Web, React Native)
```

## Setup

1. Run the setup script to install all necessary tools:
   ```bash
   ./setup.sh
   ```

2. Source the Rust environment:
   ```bash
   source $HOME/.cargo/env
   ```

## Building Modules

To build a WASM module:

```bash
cd core/[module-name]
wasm-pack build --target web
```

For React Native:
```bash
wasm-pack build --target nodejs
```

## Testing

Run Rust tests:
```bash
cargo test
```

Run integration tests:
```bash
npm run test:wasm
```

## Performance Optimization

After building, optimize the WASM file:
```bash
wasm-opt -O3 -o optimized.wasm pkg/module_bg.wasm
```

## Module Guidelines

1. **Security First**: All modules must assume malicious input
2. **No Panics**: Use Result<T, E> for all fallible operations
3. **Memory Safety**: Follow Rust's ownership rules strictly
4. **Performance**: Benchmark critical paths
5. **Documentation**: Document all public APIs

## Integration

Modules are integrated via TypeScript bindings generated by wasm-bindgen. See the bridge directory for platform-specific integration code.