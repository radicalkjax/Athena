import{c as b,h as N,q as j,o as q,t as f,i as n,a as m,F as E,b as I,m as z,l as G,v as J,g as K}from"./vendor-solid-B-ykKXyV.js";var Q=f("<div class=hex-editor><div class=hex-header><div class=hex-offset-header>Offset</div><div class=hex-data-header></div><div class=hex-ascii-header>ASCII</div></div><div class=hex-body></div><div class=hex-status>"),X=f("<div class=hex-col-header>"),Z=f("<div class=hex-row><div class=hex-offset></div><div class=hex-data></div><div class=hex-ascii>"),ee=f("<div class=hex-byte>"),te=f("<input type=text class=hex-edit-input maxlength=2 autofocus>"),se=f("<div class=hex-ascii-char>"),ne=f("<span>Offset: <!> | Value: <!> (<!>)");const ae=d=>{const[R,M]=b(null),[B,L]=b(null),[y,C]=b(""),[k,U]=N([]),[H,A]=b({start:0,end:50});let h;const D=()=>{const e=d.data,t=[];for(let l=0;l<e.length;l+=16){const c=[],i=[];for(let $=0;$<16;$++){const x=l+$;if(x<e.length){const s=e[x];s!==void 0?(c.push(s),i.push(s>=32&&s<=126?String.fromCharCode(s):".")):(c.push(null),i.push(""))}else c.push(null),i.push("")}t.push({offset:l,bytes:c,ascii:i})}U(t)};j(()=>{D()});const F=e=>{if(d.readOnly)return;const t=d.data[e];t!==void 0&&(M(e),L(e),C(t.toString(16).padStart(2,"0")))},P=()=>{var l;const e=B();if(e===null||!y())return;const t=parseInt(y(),16);!isNaN(t)&&t>=0&&t<=255&&((l=d.onDataChange)==null||l.call(d,e,t),L(null),C(""))},V=()=>{if(!h)return;const e=h.scrollTop,t=24,l=h.clientHeight,c=Math.floor(e/t),i=Math.ceil((e+l)/t);A({start:c,end:i+5})};q(()=>{h&&(h.addEventListener("scroll",V),V())});const W=e=>e.toString(16).padStart(8,"0").toUpperCase(),Y=e=>e.toString(16).padStart(2,"0").toUpperCase();return(()=>{var e=Q(),t=e.firstChild,l=t.firstChild,c=l.nextSibling,i=t.nextSibling,$=i.nextSibling,x=h;return typeof x=="function"?J(x,e):h=e,n(c,m(E,{get each(){return Array(16)},children:(s,u)=>(()=>{var a=X();return n(a,()=>u().toString(16).toUpperCase()),a})()})),n(i,m(E,{get each(){return k.slice(H().start,H().end)},children:s=>(()=>{var u=Z(),a=u.firstChild,o=a.nextSibling,O=o.nextSibling;return n(a,()=>W(s.offset)),n(o,m(E,{get each(){return s.bytes},children:(r,g)=>{const v=s.offset+g(),T=R()===v,S=B()===v;return(()=>{var _=ee();return _.$$click=()=>r!==null&&F(v),_.classList.toggle("selected",!!T),_.classList.toggle("editing",!!S),_.classList.toggle("empty",r===null),n(_,()=>S?(()=>{var p=te();return p.addEventListener("blur",P),p.addEventListener("keypress",w=>w.key==="Enter"&&P()),p.$$input=w=>C(w.currentTarget.value),I(()=>p.value=y()),p})():r!==null?Y(r):""),_})()}})),n(O,m(E,{get each(){return s.ascii},children:r=>(()=>{var g=se();return n(g,r),g})()})),u})()})),n($,(()=>{var s=z(()=>R()!==null);return()=>s()&&(()=>{const u=R(),a=d.data[u];return a!==void 0?(()=>{var o=ne(),O=o.firstChild,r=O.nextSibling,g=r.nextSibling,v=g.nextSibling,T=v.nextSibling,S=T.nextSibling;return S.nextSibling,n(o,()=>W(u),r),n(o,()=>Y(a),v),n(o,a,S),o})():null})()})()),I(s=>G(i,"height",`${k.length*24}px`)),e})()};K(["click","input"]);export{ae as H};
